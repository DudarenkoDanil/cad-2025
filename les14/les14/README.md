# Лабораторная работа №7: Spring Security. Базовая аутентификация

## Задание

1. Скопировать результат выполнения лабораторной работы №6 в директорию `/les14/lab/`.
2. Настроить проект для работы с **Spring Security**.
3. Добавить два пользователя:
   - **Пользователь** — доступен только просмотр заказов.
   - **Менеджер** — доступен полный доступ ко всем операциям с заказами.
4. Реализовать аутентификацию и авторизацию пользователя с помощью форм. На момент авторизации должна быть доступна только часть приложения с пользовательским интерфейсом.
5. Осуществить аутентификацию и авторизацию пользователя с помощью **базовой авторизации**. При предоставлении авторизации должна быть доступна часть приложения, содержащая **REST-сервис**.
6. Собрать приложение с помощью команды `gradle war`.
7. Выполнить развертывание приложения на сервере **Apache Tomcat 11**.
8. Протестировать работу приложения.
9. Оформить отчет в файле `README.md` в директории `/les14/lab`.
10. Отчет должен содержать обновленную UML-диаграмму классов в формате mermaid.

## Ответы на вопросы для защиты

### 1. Что такое Spring Security и зачем он используется?
- **Spring Security** — это фреймворк для обеспечения безопасности в приложениях на базе Spring. Он предоставляет функции аутентификации и авторизации, защиты от атак (например, CSRF, XSS), а также другие механизмы для обеспечения безопасности.

### 2. Чем отличаются аутентификация от авторизации?
- **Аутентификация** — процесс проверки подлинности пользователя, например, с помощью логина и пароля.
- **Авторизация** — процесс предоставления прав доступа пользователю после его аутентификации. Это определяет, какие ресурсы или действия доступны пользователю.

### 3. Что такое SecurityFilterChain и какова его роль в приложении?
- **SecurityFilterChain** — это цепочка фильтров, которая проверяет и обрабатывает HTTP-запросы. Каждый фильтр в цепочке отвечает за определенную задачу безопасности, например, проверку аутентификации, авторизации, защиту от CSRF и т.д.

### 4. Как работает аутентификация на основе форм в Spring Security?
- В **Spring Security** аутентификация на основе формы подразумевает создание веб-страницы для ввода логина и пароля. После ввода данных, система проверяет их и, если данные верны, создает сессию для пользователя.

### 5. Что такое UserDetailsService и зачем он нужен?
- **UserDetailsService** — это интерфейс в **Spring Security**, который используется для загрузки информации о пользователе, такой как логин, пароль и роли, из базы данных или другого хранилища. Это необходимо для аутентификации и авторизации пользователей.

### 6. Как задать роли пользователям и проверить их код?
- Роли могут быть заданы пользователям с помощью аннотации **@PreAuthorize** или через настройку **GrantedAuthority** в объекте пользователя. Проверка ролей осуществляется с помощью **hasRole()** или **hasAuthority()** в конфигурации безопасности.

### 7. Что такое базовая аутентификация и когда ее удобно использовать?
- **Базовая аутентификация** (Basic Authentication) — это метод аутентификации, при котором логин и пароль отправляются в заголовке HTTP-запроса. Этот метод удобен для простых приложений или REST API, где не требуется сложная аутентификация с формами или куки.

### 8. Как запретить доступ к URL-адресу без соответствующего ролика?
- Для того, чтобы запретить доступ к URL без соответствующей роли, в конфигурации безопасности можно использовать метод **authorizeRequests()** с указанием ролей, например:
  ```java
  http
      .authorizeRequests()
      .antMatchers("/admin/**").hasRole("ADMIN")
      .anyRequest().authenticated();

    
### 9. Как сделать свою страницу для входа (индивидуальную страницу входа)?
Как сделать свою страницу для входа (индивидуальную страницу входа)?
Для создания индивидуальной страницы входа, нужно настроить Spring Security, указав свой URL для формы входа:

 ```java
  http
    .formLogin()
    .loginPage("/login")
    .permitAll();
```
### 10. Можно ли использовать одновременно форму входа в систему и базовую аутентификацию в одном проекте?
Да, можно использовать одновременно форму входа и базовую аутентификацию, настроив разные фильтры для разных частей приложения. Например, форма входа может быть использована для обычных пользователей, а базовая аутентификация — для REST API.